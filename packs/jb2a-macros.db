{"name":"Healing Ability Green","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.pAm9ju3842k1f3bj"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Green_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Green_Thumb.webp","actorIds":[],"_id":"6u6bxVngRuycFgTh"}
{"name":"Scorching Ray","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.R7JPBXBjMKhCRzzi"}},"scope":"global","command":"var myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\nlet anFile = \"modules/JB2A_DnD5e/Library/2nd_level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_30ft_1200x200.webm\";\nlet anFileSize = 600;\nswitch(true){\n case (anDist<=300):\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/2nd_level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_30ft_1200x200.webm\";\n    break;\n case (anDist>600):\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/2nd_level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_60ft_2400x200.webm\";\n    break;\n default:\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/2nd_level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_60ft_2400x200.webm\";\n    break;\n}\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.6}\nif (anDist>=800){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (180);\n}","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/2nd_Level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_Thumb.webp","actorIds":[],"_id":"8TFBofL1j6w8F6VP"}
{"name":"Magic Missiles Purple x1","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.bC9j7m5HaBstfCuB"}},"scope":"global","command":"/// checks for number of targets and sets the array command\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\n/// returns an error message if the caster token is not selected\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\n\n/// These lines pull the X Y coordinates for the selected token and caster token\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\n/// calculating the angle and distance to target in pixels. This is unique to the current scene\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\n/// settinng the animation file to play. Base file can be any, because the file will be switched based on the distance to target\nlet anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_01_1200x400.webm\";\nlet anFileSize = 1200;\n/// evaluates the distance to the target and choose the best length animation file to play\nswitch(true){\n case (anDist<=1200):\n   /// anFileSize should always match the length of the animation file, otherwise it will not land on target. For example, 1200 for 1200x200, and 3600 for 3600x200. If the file was 600x200, anFileSize would be 600\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_04_1200x400.webm\";\n    break;\n case (anDist>2400):\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_02_2400x400.webm\";\n    break;\n default:\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_03_2400x400.webm\";\n    break;\n}\n\n/// Sets the scaling parameters for the video file. This will stretch or shrink the file on the x and y axis depending on the distance to target\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.8}\nif (anDist>=800){anScaleY = anScale}\n\n/// corrects the angle against any variation\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\n/// Sets the originating position of the animation file and anchors it off center. Also applies the angle and scale that was determined above\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\n/// Tells FXMaster to play the spell animation\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n/// delays 20ms between targets if multiple were selected\nawait wait (20);\n}","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_Thumb.webp","actorIds":[],"_id":"8iu5rApc4fjwrXHG"}
{"name":"Create Actor - Arcane Hand","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.3Z4oCtMZSabownTO"}},"scope":"global","command":"let d = new Dialog({\n  title: \"Token Creation Macro\",\n  content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n  buttons: {\n      one: {\n       icon: '<i class=\"fas fa-check\"></i>',\n       label: \"OK\",\n       //callback: () => console.log(\"Chose One\")\n      },\n    \n  },\n});\nd.render(true);\n\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Arcane Hand\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Arcane Hand`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Arcane Hand\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Blue_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Blue_400x400.webm\", scale: 1.5\n     },\n      \"token.vision\": true,\n      \"data.abilities.str\" : {value: 26},\n      \"data.attributes.ac\": {value: 20},\n      \"data.attributes.hp\": {value: 0, min:0, max:0},\n      \"token.width\": 2,\n      \"token.height\": 2,\n      \"data.attributes.movement\": {walk: 60},\n\n    })\n  })();","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Blue_Thumb.webp","actorIds":[],"_id":"Cs2zEUjOcsOaFOVq"}
{"name":"Healing Ability Yellow","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.XK9RBWEObFtTXuHc"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Yellow_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Yellow_Thumb.webp","actorIds":[],"_id":"HPj1Y08ow7ObEwcY"}
{"name":"Throwing Dagger","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.rJ8ybEVcWYgCANDy"}},"scope":"global","command":"var myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nlet anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/ThrowingWeapon_Dagger01_15ft_600x300.webm\";\nlet anFileSize = 600;\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/ThrowingWeapon_Dagger01_30ft_1200x300.webm\";\n    break;\n case (anDist>1800):\n    anFileSize = 1800;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks//Ranged/ThrowingWeapon_Dagger01_45ft_1800x300.webm\";\n    break;\n default:\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/ThrowingWeapon_Dagger01_30ft_1200x300.webm\";\n    break;\n}\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.8}\nif (anDist>=800){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (20);\n}","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/ThrowingWeapon_Dagger01_Thumb.webp","actorIds":[],"_id":"HTHbytfuUCaQPskL"}
{"name":"Magic Missiles Purple x 3","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.bC9j7m5HaBstfCuB"}},"scope":"global","command":"/// This macro pulls from the JB2A list of Purple Magic Missiles to throw 3 random paths at targeted tokens\n\nif(game.user.targets.size == 0) return ui.notifications.error('You must target at least one token');\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\n\nlet mmA = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_01_1200x400.webm\";\nlet mmB = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_02_1200x400.webm\";\nlet mmC = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_03_1200x400.webm\";\nlet mmD = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_04_1200x400.webm\";\nlet mmE = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_05_1200x400.webm\";\nlet mmF = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_06_1200x400.webm\";\nlet mmG = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_07_1200x400.webm\";\nlet mmH = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_08_1200x400.webm\";\nlet mmI = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_09_1200x400.webm\";\n\nlet mmAA = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_01_2400x400.webm\";\nlet mmBB = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_02_2400x400.webm\";\nlet mmCC = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_03_2400x400.webm\";\nlet mmDD = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_04_2400x400.webm\";\nlet mmEE = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_05_2400x400.webm\";\nlet mmFF = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_06_2400x400.webm\";\nlet mmGG = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_07_2400x400.webm\";\nlet mmHH = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_08_2400x400.webm\";\nlet mmII = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_09_2400x400.webm\";\n\nfunction random_itemA(itemsA)\n{\nreturn itemsA[Math.floor(Math.random()*itemsA.length)];\n}\n\nvar itemsA = [mmA, mmB, mmC, mmD, mmE, mmF, mmG, mmH, mmI];\n\nfunction random_itemB(itemsB)\n{\nreturn itemsB[Math.floor(Math.random()*itemsB.length)];\n}\n\nvar itemsB = [mmAA, mmBB, mmCC, mmDD, mmEE, mmFF, mmGG, mmHH, mmII];\n\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nlet anFile = random_itemA(itemsA);\nlet anFileSize = 600;\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile = random_itemA(itemsA);\n    break;\n default:\n    anFileSize = 2400;\n    anFile = random_itemB(itemsB);\n    break;\n}\n\nlet anFile2 = random_itemA(itemsA);\nswitch(true){\n case (anDist<=1200):    \n    anFileSize = 1200;\n    anFile2 = random_itemA(itemsA);\n    break;\n default:\n    anFileSize = 2400;\n    anFile2 = random_itemB(itemsB);\n    break;\n}\n\nlet anFile3 = random_itemA(itemsA);\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile3 = random_itemA(itemsA);\n    break;\n default:\n    anFileSize = 2400;\n    anFile3 = random_itemB(itemsB);\n    break;\n}\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.6}\nif (anDist>=700 && anDist <=1200){anScaleY = 0.8}\nif (anDist>=1300 && anDist <=1800){anScaleY = 0.6}\nif (anDist>=1900){anScaleY = anScale}\n\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \nlet spellAnim2 = \n                    {\n                     file: anFile2,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \nlet spellAnim3 = \n                    {\n                     file: anFile3,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\nawait wait (80);\ncanvas.fxmaster.playVideo(spellAnim2);\nawait wait (120);\ncanvas.fxmaster.playVideo(spellAnim3);\nawait wait (50);\ngame.socket.emit('module.fxmaster', spellAnim,spellAnim2,spellAnim3);\nawait wait (50);\n}","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_Thumb.webp","actorIds":[],"_id":"KITCtvDFYwpIFXxK"}
{"name":"Create Actor - Spiritual Weapon","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.DSLNjiuHiMENFgde"}},"scope":"global","command":"let d = new Dialog({\n    title: \"Token Creation Macro\",\n    content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n    buttons: {\n        one: {\n         icon: '<i class=\"fas fa-check\"></i>',\n         label: \"OK\",\n         //callback: () => console.log(\"Chose One\")\n        },\n      \n    },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Spiritual Weapon\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Spiritual Weapon`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Spiritual Weapon\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Mace01_01_Spectral_Blue_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Mace01_01_Spectral_Blue_200x200.webm\", scale: 2},      \n      \"token.vision\": true,\n    })\n  })();","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Mace01_01_Spectral_Blue_Thumb.webp","actorIds":[],"_id":"PZMAEqVDkbQd41Ca"}
{"name":"Create Actor - Flaming Sphere - Wildcard","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.dPxKPO255cv41GA5"}},"scope":"global","command":"let d = new Dialog({\n  title: \"Token Creation Macro\",\n  content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n  buttons: {\n      one: {\n       icon: '<i class=\"fas fa-check\"></i>',\n       label: \"OK\",\n       //callback: () => console.log(\"Chose One\")\n      },\n    \n  },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Flaming Sphere\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Flaming Sphere`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Flaming Sphere - Wildcard\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Green_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_*.webm\", scale:1},\n      \"token.randomImg\": true,\n      \"token.vision\": true,\n      \"token.dimLight\": 40,\n      \"token.brightLight\": 20,\n      \"token.lightAnimation\":{type: \"torch\", speed: 10, intensity: 1},\n      \"token.lightColor\": \"#ffde85\",\n      \"token.lightAlpha\": 0.09,\n    })\n  })();","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Green_Thumb.webp","actorIds":[],"_id":"PzOIQLUMhq3AStSa"}
{"name":"Witch Bolt","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.ZGZIXqP4hXgt5px5"}},"scope":"global","command":"var myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\nlet anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Witch_Bolt/WitchBolt_01_Regular_Blue_600x200.webm\";\nlet anFileSize = 600;\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.8}\nif (anDist>=800){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (180);\n}","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/1st_Level/Witch_Bolt/WitchBolt_01_Regular_Blue_Thumb.webp","actorIds":[],"_id":"U9HPqpgTJME7Xmff"}
{"name":"Create Actor - Spiritual Weapon - Wildcard","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.pq9PjgVGfPQXKdxS"}},"scope":"global","command":"let d = new Dialog({\n    title: \"Token Creation Macro\",\n    content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n    buttons: {\n        one: {\n         icon: '<i class=\"fas fa-check\"></i>',\n         label: \"OK\",\n         //callback: () => console.log(\"Chose One\")\n        },\n      \n    },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Spiritual Weapon\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Spiritual Weapon`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Spiritual Weapon - Wildcard\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Maul01_01_Flaming_Yellow_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon*.webm\", scale: 2},\n      \"token.randomImg\": true,\n      \"token.vision\": true,\n    })\n  })();","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Maul01_01_Flaming_Yellow_Thumb.webp","actorIds":[],"_id":"X7ussBTO1KZrrmVV"}
{"name":"Healing Ability Purple","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.5EEMzLQF4gsVAabz"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Purple_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Purple_Thumb.webp","actorIds":[],"_id":"b5svVFDXAyKHYzph"}
{"name":"Arrow","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.QiSggUQALHURN7Uo"}},"scope":"global","command":"var myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nlet anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_30ft_1200x200.webm\";\nlet anFileSize = 600;\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_30ft_1200x200.webm\";\n    break;\n case (anDist>3600):\n    anFileSize = 3600;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_90ft_3600x200.webm\";\n    break;\n default:\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_60ft_2400x200.webm\";\n    break;\n}\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.6}\nif (anDist>=800){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (20);\n}","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_Thumb.webp","actorIds":[],"_id":"bdPfmw6t5M55ILG2"}
{"name":"Create Actor - Dancing Light - Wildcard","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.78gwoZysOGs10uQv"}},"scope":"global","command":"let d = new Dialog({\n    title: \"Token Creation Macro\",\n    content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n    buttons: {\n        one: {\n         icon: '<i class=\"fas fa-check\"></i>',\n         label: \"OK\",        \n        },\n      \n    },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Dancing Light\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Dancing Light`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Dancing light - Wildcard\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_Green_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_*.webm\", scale: 0.8},\n      \"token.randomImg\": true,\n      \"token.vision\": true,\n      \"token.dimLight\": 10,\n      \"token.lightAnimation\":{type: \"torch\", speed: 3, intensity: 7},\n      \"token.lightColor\": \"#ffde85\",\n      \"token.lightAlpha\": 0.2,\n    })\n  })();","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_Green_Thumb.webp","actorIds":[],"_id":"cNCVYy5A4n4eZ9Ni"}
{"name":"Ray Of Frost","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.H3XUcSKy5bFt31RE"}},"scope":"global","command":"var myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nlet anFile = \"modules/JB2A_DnD5e/Library/Cantrip/Ray_Of_Frost_INSTANTANEOUS/RayOfFrost_01_Blue_15ft_600x200.webm\";\nlet anFileSize = 600;\nswitch(true){\n case (anDist<=600):\n    anFileSize = 600;\n    anFile = \"modules/JB2A_DnD5e/Library/Cantrip/Ray_Of_Frost_INSTANTANEOUS/RayOfFrost_01_Blue_15ft_600x200.webm\";\n    break;\n case (anDist>2400):\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/Cantrip/Ray_Of_Frost_INSTANTANEOUS/RayOfFrost_01_Blue_45ft_2400x200.webm\";\n    break;\n default:\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/Cantrip/Ray_Of_Frost_INSTANTANEOUS/RayOfFrost_01_Blue_30ft_1200x200.webm\";\n    break;\n}\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.6}\nif (anDist>=800){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (180);\n}","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Cantrip/Ray_Of_Frost_INSTANTANEOUS/RayOfFrost_01_Blue_Thumb.webp","actorIds":[],"_id":"cRXkgClXjlfnrvKI"}
{"name":"Create Actor - Dancing Light","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.Ep9jAWcJ1HpQBNiE"}},"scope":"global","command":"let d = new Dialog({\n    title: \"Token Creation Macro\",\n    content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n    buttons: {\n        one: {\n         icon: '<i class=\"fas fa-check\"></i>',\n         label: \"OK\",        \n        },\n      \n    },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Dancing Light\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Dancing Light`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Dancing light\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_BlueYellow_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_BlueYellow_200x200.webm\", scale: 0.8},\n      \"token.vision\": true,\n      \"token.dimLight\": 10,\n      \"token.lightAnimation\":{type: \"torch\", speed: 3, intensity: 7},\n      \"token.lightColor\": \"#ffde85\",\n      \"token.lightAlpha\": 0.2,\n    })\n  })();","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_BlueYellow_Thumb.webp","actorIds":[],"_id":"cjutDwP8VNRMoUfd"}
{"name":"Cure Wounds","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.PzeQutWfD871bFES"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/1st_Level/Cure_Wounds_INSTANTANEOUS/CureWounds_01_Blue_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/1st_Level/Cure_Wounds_INSTANTANEOUS/CureWounds_01_Blue_Thumb.webp","actorIds":[],"_id":"hEAOgVAr8HfayAxL"}
{"name":"Create Actor - Arcane Hand - Wildcard","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.nZlfLmbw8GeiV6Bw"}},"scope":"global","command":"let d = new Dialog({\n  title: \"Token Creation Macro\",\n  content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n  buttons: {\n      one: {\n       icon: '<i class=\"fas fa-check\"></i>',\n       label: \"OK\",\n       //callback: () => console.log(\"Chose One\")\n      },\n    \n  },\n});\nd.render(true);\n\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Arcane Hand\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Arcane Hand`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Arcane Hand - Wildcard\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Green_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_*.webm\", scale: 1.5\n     },\n      \"token.vision\": true,\n      \"data.abilities.str\" : {value: 26},\n      \"token.randomImg\": true,\n      \"token.vision\": true,\n      \"data.abilities.str\" : {value: 26},\n      \"data.attributes.ac\": {value: 20},\n      \"data.attributes.hp\": {value: 0, min:0, max:0},\n      \"token.width\": 2,\n      \"token.height\": 2,\n      \"data.attributes.movement\": {walk: 60},\n\n    })\n  })();","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Green_Thumb.webp","actorIds":[],"_id":"o1L8U9HQExEejGv2"}
{"name":"Healing Ability Blue","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.CsFZeieJwNmvw3nS"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Blue_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Blue_Thumb.webp","actorIds":[],"_id":"rNrhOxHBQ5Ika9fO"}
{"name":"Create Actor - Flaming Sphere","permission":{"default":0,"KBmaI5BUw93ozERD":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.fNPvm52IpGxfJyKF"}},"scope":"global","command":"let d = new Dialog({\n  title: \"Token Creation Macro\",\n  content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n  buttons: {\n      one: {\n       icon: '<i class=\"fas fa-check\"></i>',\n       label: \"OK\",\n       //callback: () => console.log(\"Chose One\")\n      },\n    \n  },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Flaming Sphere\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Flaming Sphere`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Flaming Sphere\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Orange_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Orange_200x200.webm\", scale:1},      \n      \"token.vision\": true,\n      \"token.dimLight\": 40,\n      \"token.brightLight\": 20,\n      \"token.lightAnimation\":{type: \"torch\", speed: 10, intensity: 1},\n      \"token.lightColor\": \"#ffde85\",\n      \"token.lightAlpha\": 0.09,\n    })\n  })();","author":"KBmaI5BUw93ozERD","img":"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Orange_Thumb.webp","actorIds":[],"_id":"ttUiatuLCaHS9ZAw"}
