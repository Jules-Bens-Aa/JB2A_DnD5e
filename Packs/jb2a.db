{"_id":"1bp8Pw9bwK27H7Be","name":"Create Actor - Arcane Hand - Wildcard","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.nZlfLmbw8GeiV6Bw"}},"scope":"global","command":"let d = new Dialog({\n  title: \"Token Creation Macro\",\n  content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n  buttons: {\n      one: {\n       icon: '<i class=\"fas fa-check\"></i>',\n       label: \"OK\",\n       //callback: () => console.log(\"Chose One\")\n      },\n    \n  },\n});\nd.render(true);\n\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Arcane Hand\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Arcane Hand`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Arcane Hand - Wildcard\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Green_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_*.webm\", scale: 1.5\n     },\n      \"token.vision\": true,\n      \"data.abilities.str\" : {value: 26},\n      \"token.randomImg\": true,\n      \"token.vision\": true,\n      \"data.abilities.str\" : {value: 26},\n      \"data.attributes.ac\": {value: 20},\n      \"data.attributes.hp\": {value: 0, min:0, max:0},\n      \"token.width\": 2,\n      \"token.height\": 2,\n      \"data.attributes.movement\": {walk: 60},\n\n    })\n  })();","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Green_Thumb.webp","actorIds":[]}
{"_id":"2GblNMZ0ak2OeeI6","name":"Create Actor - Spiritual Weapon","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.DSLNjiuHiMENFgde"}},"scope":"global","command":"let d = new Dialog({\n    title: \"Token Creation Macro\",\n    content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n    buttons: {\n        one: {\n         icon: '<i class=\"fas fa-check\"></i>',\n         label: \"OK\",\n         //callback: () => console.log(\"Chose One\")\n        },\n      \n    },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Spiritual Weapon\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Spiritual Weapon`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Spiritual Weapon\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Mace01_01_Spectral_Blue_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Mace01_01_Spectral_Blue_200x200.webm\", scale: 2},      \n      \"token.vision\": true,\n    })\n  })();","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Mace01_01_Spectral_Blue_Thumb.webp","actorIds":[]}
{"_id":"3Na18afgLyXhhwpR","name":"Healing Ability Green","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.pAm9ju3842k1f3bj"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Green_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Green_Thumb.webp","actorIds":[]}
{"_id":"5I3S1UUM7mcORsjG","name":"Healing Ability Yellow","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.XK9RBWEObFtTXuHc"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Yellow_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Yellow_Thumb.webp","actorIds":[]}
{"_id":"6R0VG2k6uohZV3wL","name":"Healing Ability Purple","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.5EEMzLQF4gsVAabz"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Purple_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Purple_Thumb.webp","actorIds":[]}
{"_id":"6pSJYiEDHq51FoEU","name":"Healing Ability Blue","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.CsFZeieJwNmvw3nS"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Blue_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Generic/Healing/HealingAbility_01_Blue_Thumb.webp","actorIds":[]}
{"_id":"9VjU4jeae0piPMtk","name":"Throwing Dagger","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.rJ8ybEVcWYgCANDy"}},"scope":"global","command":"var myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nlet anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/ThrowingWeapon_Dagger01_15ft_600x300.webm\";\nlet anFileSize = 600;\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/ThrowingWeapon_Dagger01_30ft_1200x300.webm\";\n    break;\n case (anDist>1800):\n    anFileSize = 1800;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks//Ranged/ThrowingWeapon_Dagger01_45ft_1800x300.webm\";\n    break;\n default:\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/ThrowingWeapon_Dagger01_30ft_1200x300.webm\";\n    break;\n}\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.8}\nif (anDist>=800){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (20);\n}","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/ThrowingWeapon_Dagger01_Thumb.webp","actorIds":[]}
{"_id":"BTpmkSEKHGkbXI2g","name":"Create Actor - Flaming Sphere - Wildcard","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.dPxKPO255cv41GA5"}},"scope":"global","command":"let d = new Dialog({\n  title: \"Token Creation Macro\",\n  content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n  buttons: {\n      one: {\n       icon: '<i class=\"fas fa-check\"></i>',\n       label: \"OK\",\n       //callback: () => console.log(\"Chose One\")\n      },\n    \n  },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Flaming Sphere\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Flaming Sphere`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Flaming Sphere - Wildcard\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Green_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_*.webm\", scale:1},\n      \"token.randomImg\": true,\n      \"token.vision\": true,\n      \"token.dimLight\": 40,\n      \"token.brightLight\": 20,\n      \"token.lightAnimation\":{type: \"torch\", speed: 10, intensity: 1},\n      \"token.lightColor\": \"#ffde85\",\n      \"token.lightAlpha\": 0.09,\n    })\n  })();","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Green_Thumb.webp","actorIds":[]}
{"_id":"D1l9gm2RUOeGdTMt","name":"Arrow","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.QiSggUQALHURN7Uo"}},"scope":"global","command":"var myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nlet anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_30ft_1200x200.webm\";\nlet anFileSize = 600;\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_30ft_1200x200.webm\";\n    break;\n case (anDist>3600):\n    anFileSize = 3600;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_90ft_3600x200.webm\";\n    break;\n default:\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_60ft_2400x200.webm\";\n    break;\n}\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.6}\nif (anDist>=800){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (20);\n}","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Generic/Weapon_Attacks/Ranged/Arrow_Simple_01_Thumb.webp","actorIds":[]}
{"_id":"EckJSzaQLonIHJ4C","name":"Witch Bolt","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.ZGZIXqP4hXgt5px5"}},"scope":"global","command":"/// Prompts and error if caster token was not selected\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\n/// Ensures only a single token was targeted\nif(game.user.targets.size !== 1) return ui.notifications.warn('Single Target Please');\n\nlet myToken = canvas.tokens.controlled[0];\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nlet anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Witch_Bolt/WitchBolt_01_Regular_Blue_600x200.webm\";\nlet anFileSize = 600;\n\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=200){anScaleY = 0.6}\nif (anDist>=300){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/1st_Level/Witch_Bolt/WitchBolt_01_Regular_Blue_Thumb.webp","actorIds":[]}
{"_id":"J5ExJck17RIpIkGI","name":"Cure Wounds","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.PzeQutWfD871bFES"}},"scope":"global","command":"/// Ensures the user has only 1 token targeted.\n\nif(game.user.targets.size !== 1) return ui.notifications.warn(`Single Target Please`);\n\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet tarScale = ((mainTarget.data.width + mainTarget.data.height)/2);\nlet spellAnim = \n                    {\n                     file: \"modules/JB2A_DnD5e/Library/1st_Level/Cure_Wounds_INSTANTANEOUS/CureWounds_01_Blue_200x200.webm\",\n                      position: {\n                        x: tarX,\n                        y: tarY\n                      },\n                      anchor: {\n                       x: 0.5,\n                       y: 0.5\n                      },\n                      angle: 0,\n                      scale: {\n                       x: tarScale,\n                       y: tarScale\n                      }\n                    }; \ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/1st_Level/Cure_Wounds_INSTANTANEOUS/CureWounds_01_Blue_Thumb.webp","actorIds":[]}
{"name":"Ray Of Frost","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.H3XUcSKy5bFt31RE"}},"scope":"global","command":"/// Prompts and error if caster token was not selected\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\n/// Ensures only a single token was targeted\nif(game.user.targets.size !== 1) return ui.notifications.warn('Single Target Please');\n\nlet myToken = canvas.tokens.controlled[0];\nlet mainTarget = Array.from(game.user.targets)[0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nlet anFile = \"modules/JB2A_DnD5e/Library/Cantrip/Ray_Of_Frost/RayOfFrost_01_Blue_30ft_1200x200.webm\";\nlet anFileSize = 1200;\n\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=200){anScaleY = 0.6}\nif (anDist>=300){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Cantrip/Ray_Of_Frost/RayOfFrost_01_Blue_Thumb.webp","actorIds":[],"_id":"J602Rqr65SeHjXkc"}
{"_id":"OOAQCJhzEo8WlOD2","name":"Create Actor - Flaming Sphere","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.fNPvm52IpGxfJyKF"}},"scope":"global","command":"let d = new Dialog({\n  title: \"Token Creation Macro\",\n  content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n  buttons: {\n      one: {\n       icon: '<i class=\"fas fa-check\"></i>',\n       label: \"OK\",\n       //callback: () => console.log(\"Chose One\")\n      },\n    \n  },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Flaming Sphere\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Flaming Sphere`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Flaming Sphere\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Orange_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Orange_200x200.webm\", scale:1},      \n      \"token.vision\": true,\n      \"token.dimLight\": 40,\n      \"token.brightLight\": 20,\n      \"token.lightAnimation\":{type: \"torch\", speed: 10, intensity: 1},\n      \"token.lightColor\": \"#ffde85\",\n      \"token.lightAlpha\": 0.09,\n    })\n  })();","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/2nd_Level/Flaming_Sphere/FlamingSphere_01_Orange_Thumb.webp","actorIds":[]}
{"_id":"ezM9lLrH83U6XNLg","name":"Create Actor - Dancing Light","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.Ep9jAWcJ1HpQBNiE"}},"scope":"global","command":"let d = new Dialog({\n    title: \"Token Creation Macro\",\n    content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n    buttons: {\n        one: {\n         icon: '<i class=\"fas fa-check\"></i>',\n         label: \"OK\",        \n        },\n      \n    },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Dancing Light\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Dancing Light`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Dancing light\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_BlueYellow_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_BlueYellow_200x200.webm\", scale: 0.8},\n      \"token.vision\": true,\n      \"token.dimLight\": 10,\n      \"token.lightAnimation\":{type: \"torch\", speed: 3, intensity: 7},\n      \"token.lightColor\": \"#ffde85\",\n      \"token.lightAlpha\": 0.2,\n    })\n  })();","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_BlueYellow_Thumb.webp","actorIds":[]}
{"_id":"frJKkk2UZrfo40sO","name":"Create Actor - Arcane Hand","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.3Z4oCtMZSabownTO"}},"scope":"global","command":"let d = new Dialog({\n  title: \"Token Creation Macro\",\n  content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n  buttons: {\n      one: {\n       icon: '<i class=\"fas fa-check\"></i>',\n       label: \"OK\",\n       //callback: () => console.log(\"Chose One\")\n      },\n    \n  },\n});\nd.render(true);\n\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Arcane Hand\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Arcane Hand`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Arcane Hand\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Blue_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Blue_400x400.webm\", scale: 1.5\n     },\n      \"token.vision\": true,\n      \"data.abilities.str\" : {value: 26},\n      \"data.attributes.ac\": {value: 20},\n      \"data.attributes.hp\": {value: 0, min:0, max:0},\n      \"token.width\": 2,\n      \"token.height\": 2,\n      \"data.attributes.movement\": {walk: 60},\n\n    })\n  })();","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/5th_Level/Arcane_Hand/ArcaneHand_Human_01_Idle_Blue_Thumb.webp","actorIds":[]}
{"_id":"lenQSoVBF4HfAQyA","name":"Create Actor - Spiritual Weapon - Wildcard","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.pq9PjgVGfPQXKdxS"}},"scope":"global","command":"let d = new Dialog({\n    title: \"Token Creation Macro\",\n    content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n    buttons: {\n        one: {\n         icon: '<i class=\"fas fa-check\"></i>',\n         label: \"OK\",\n         //callback: () => console.log(\"Chose One\")\n        },\n      \n    },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Spiritual Weapon\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Spiritual Weapon`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Spiritual Weapon - Wildcard\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Maul01_01_Flaming_Yellow_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon*.webm\", scale: 2},\n      \"token.randomImg\": true,\n      \"token.vision\": true,\n    })\n  })();","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/2nd_Level/Spiritual_Weapon/SpiritualWeapon_Maul01_01_Flaming_Yellow_Thumb.webp","actorIds":[]}
{"_id":"peCuYSkQBW0psvsk","name":"Scorching Ray","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.R7JPBXBjMKhCRzzi"}},"scope":"global","command":"var myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\nlet anFile = \"modules/JB2A_DnD5e/Library/2nd_level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_30ft_1200x200.webm\";\nlet anFileSize = 600;\nswitch(true){\n case (anDist<=300):\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/2nd_level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_30ft_1200x200.webm\";\n    break;\n case (anDist>600):\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/2nd_level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_60ft_2400x200.webm\";\n    break;\n default:\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/2nd_level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_60ft_2400x200.webm\";\n    break;\n}\n\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.6}\nif (anDist>=800){anScaleY = anScale}\n\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\nawait wait (180);\n}","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/2nd_Level/Scorching_Ray_INSTANTANEOUS/ScorchingRay_01_Orange_Thumb.webp","actorIds":[]}
{"_id":"vvON8vEIEdJN7IZF","name":"Magic Missiles","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.bC9j7m5HaBstfCuB"}},"scope":"global","command":"/// checks for number of targets and sets the array command\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\nconsole.log(myStringArray[i]);\n\n/// returns an error message if the caster token is not selected\nif(canvas.tokens.controlled.length == 0) return ui.notifications.error(\"Please select your token\");\n\n/// These lines pull the X Y coordinates for the selected token and caster token\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\nlet halfGrid = canvas.scene.data.grid/2;\nlet srcX = (myToken.data.x + (myToken.data.width*halfGrid));\nlet srcY = (myToken.data.y + (myToken.data.height*halfGrid));\nlet tarX = (mainTarget.data.x + (mainTarget.data.width*halfGrid));\nlet tarY = (mainTarget.data.y + (mainTarget.data.height*halfGrid));\nlet outerRad = Math.sqrt(Math.pow(mainTarget.data.width*halfGrid,2) + Math.pow(myToken.data.width*halfGrid,2));\n\n/// calculating the angle and distance to target in pixels. This is unique to the current scene\nlet anDeg = -(Math.atan(((srcY - tarY)/(srcX - tarX)))*57.3);\nlet anDist = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2));\nasync function wait(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\n/// settinng the animation file to play. Base file can be any, because the file will be switched based on the distance to target\nlet anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_01_1200x400.webm\";\nlet anFileSize = 1200;\n/// evaluates the distance to the target and choose the best length animation file to play\nswitch(true){\n case (anDist<=1200):\n   /// anFileSize should always match the length of the animation file, otherwise it will not land on target. For example, 1200 for 1200x200, and 3600 for 3600x200. If the file was 600x200, anFileSize would be 600\n    anFileSize = 1200;\n    anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_30ft_04_1200x400.webm\";\n    break;\n case (anDist>2400):\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_02_2400x400.webm\";\n    break;\n default:\n    anFileSize = 2400;\n    anFile = \"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_60ft_03_2400x400.webm\";\n    break;\n}\n\n/// Sets the scaling parameters for the video file. This will stretch or shrink the file on the x and y axis depending on the distance to target\nlet anScale = Math.sqrt(Math.pow(srcX-tarX,2)+Math.pow(srcY-tarY,2))/anFileSize;\nlet anScaleY = anScale;\nif (anDist<=600){anScaleY = 0.8}\nif (anDist>=800){anScaleY = anScale}\n\n/// corrects the angle against any variation\nif(srcX>tarX){anDeg = anDeg+180}\nif(srcX==tarX){if(srcY>tarY){anDeg=90}else{anDeg=-90}}\n\n/// Sets the originating position of the animation file and anchors it off center. Also applies the angle and scale that was determined above\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: {\n                        x: srcX,\n                        y: srcY\n                      },\n                      anchor: {\n                       x: 0,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\n/// Tells FXMaster to play the spell animation\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n/// delays 20ms between targets if multiple were selected\nawait wait (20);\n}","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/1st_Level/Magic_Missile_INSTANTANEOUS/MagicMissile_01_Purple_Thumb.webp","actorIds":[]}
{"_id":"xo8lvUwm3T5ktPpJ","name":"Create Actor - Dancing Light - Wildcard","permission":{"default":0,"7a8o1uFSxDkb8qyI":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.78gwoZysOGs10uQv"}},"scope":"global","command":"let d = new Dialog({\n    title: \"Token Creation Macro\",\n    content: \"<p>Your actor has been created in its corresponding folder in your Actor Directory panel.</p><br><p> Set permissions for it and drag on the scene when needed !</p>\",\n    buttons: {\n        one: {\n         icon: '<i class=\"fas fa-check\"></i>',\n         label: \"OK\",        \n        },\n      \n    },\n});\nd.render(true);\n\n(async ()=>{\n    let testFolder = game.folders.find(f => f.name === \"Dancing Light\" && f.type === \"Actor\");\n    if(!testFolder) testFolder = await Folder.create({ name : `Dancing Light`, type : `Actor`, parent : null });\n  \n    await Actor.create({\n      name: \"Dancing light - Wildcard\",\n      type: \"character\",\n      img: \"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_Green_Thumb.webp\",\n      folder: testFolder.id,\n      sort: 12000,\n      token: { img: \"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_*.webm\", scale: 0.8},\n      \"token.randomImg\": true,\n      \"token.vision\": true,\n      \"token.dimLight\": 10,\n      \"token.lightAnimation\":{type: \"torch\", speed: 3, intensity: 7},\n      \"token.lightColor\": \"#ffde85\",\n      \"token.lightAlpha\": 0.2,\n    })\n  })();","author":"7a8o1uFSxDkb8qyI","img":"modules/JB2A_DnD5e/Library/Cantrip/Dancing_Lights/DancingLights_01_Green_Thumb.webp","actorIds":[]}
